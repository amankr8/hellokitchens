<div class="h-screen flex flex-col bg-gray-50 overflow-hidden">
  <header
    class="sticky top-0 h-16 bg-white border-b border-gray-100 p-4 flex justify-between items-center shadow-sm z-30"
  >
    <div class="flex items-center gap-4">
      <button
        (click)="toggleSidebar()"
        class="w-10 h-10 px-6 flex items-center justify-center hover:bg-gray-100 rounded-xl transition-all text-gray-400 active:scale-90"
      >
        <fa-icon
          [icon]="icons.chevronLeft"
          [class.rotate-180]="isSidebarCollapsed()"
          class="transition-transform duration-500 ease-in-out"
        ></fa-icon>
      </button>

      <div routerLink="/" class="flex items-center gap-2 cursor-pointer group">
        <fa-icon [icon]="icons.logo" class="text-orange-600 text-xl"></fa-icon>
        <span class="text-orange-600 font-bold text-xl ml-1 tracking-tight"
          >LiveMenu</span
        >
      </div>
    </div>

    <div class="flex items-center gap-6">
      <div class="hidden sm:flex flex-col items-end">
        <span class="text-sm font-bold text-gray-800">
          {{ this.kitchen()?.name }}
        </span>
        <span class="text-[10px] text-gray-400 uppercase font-bold text-right"
          >Kitchen Owner</span
        >
      </div>

      <button
        (click)="onLogout()"
        class="flex items-center gap-2 px-4 py-2 text-sm font-bold text-red-500 hover:bg-red-50 rounded-xl transition-all active:scale-95"
      >
        <fa-icon [icon]="icons.logout"></fa-icon>
        <span class="inline">Logout</span>
      </button>
    </div>
  </header>

  <div class="flex flex-1 overflow-hidden">
    <aside
      [class.w-64]="!isSidebarCollapsed()"
      [class.w-20]="isSidebarCollapsed()"
      class="bg-white border-r border-gray-100 p-4 hidden md:flex flex-col transition-all duration-300 ease-in-out z-40"
      [class.overflow-y-auto]="!isSidebarCollapsed()"
      [class.overflow-visible]="isSidebarCollapsed()"
    >
      <nav class="space-y-2 flex-1">
        <a
          *ngFor="let link of navLinks"
          [routerLink]="link.path"
          routerLinkActive="bg-orange-50 text-orange-600 shadow-sm shadow-orange-100/50 is-active"
          #rla="routerLinkActive"
          class="flex items-center h-12 rounded-xl text-gray-600 font-semibold transition-all hover:bg-gray-50 group overflow-visible relative"
        >
          <div
            *ngIf="rla.isActive"
            class="absolute left-0 top-3 bottom-3 w-1 bg-orange-500 rounded-r-full z-10"
          ></div>

          <div class="w-12 h-12 shrink-0 grid place-items-center">
            <fa-icon
              [icon]="link.icon"
              class="text-lg transition-transform group-hover:scale-110"
            ></fa-icon>
          </div>

          <span
            *ngIf="!isSidebarCollapsed()"
            class="flex-1 whitespace-nowrap animate-in fade-in slide-in-from-left-2 duration-300"
          >
            {{ link.label }}
          </span>

          <div
            *ngIf="isSidebarCollapsed()"
            class="absolute left-16 px-3 py-2 bg-gray-900 text-white text-[10px] font-black uppercase tracking-widest rounded-lg opacity-0 pointer-events-none group-hover:opacity-100 group-hover:translate-x-1 transition-all z-50 whitespace-nowrap shadow-xl"
          >
            {{ link.label }}
            <div
              class="absolute -left-1 top-1/2 -translate-y-1/2 w-2 h-2 bg-gray-900 rotate-45"
            ></div>
          </div>

          <span
            *ngIf="!isSidebarCollapsed() && link.showPulse"
            class="w-2 h-2 bg-orange-500 rounded-full animate-pulse mr-4"
          ></span>
        </a>
      </nav>

      <div
        class="pt-4 border-t border-gray-50 transition-opacity"
        [class.opacity-0]="isSidebarCollapsed()"
      >
        <p
          class="text-[10px] font-bold text-gray-300 uppercase text-center tracking-widest whitespace-nowrap"
        >
          v1.0 Powered by LiveMenu
        </p>
      </div>
    </aside>

    <main class="flex-1 p-4 md:p-8 overflow-y-auto scroll-smooth">
      <div class="max-w-5xl mx-auto pb-6">
        <div class="mb-10">
          <div
            class="flex items-center gap-2 text-xs font-bold text-gray-400 uppercase tracking-widest mb-1"
          >
            <fa-icon [icon]="icons.kitchen"></fa-icon> <span>Dashboard</span>

            <ng-container
              *ngFor="let crumb of getBreadcrumbs(); let last = last"
            >
              <span class="text-gray-300">/</span>
              <span [class.text-orange-500]="last">{{ crumb }}</span>
            </ng-container>
          </div>

          <h2
            class="text-4xl font-black text-gray-900 capitalize tracking-tight"
          >
            {{ getPageRouteName() }}
          </h2>
        </div>

        <router-outlet></router-outlet>
      </div>
    </main>
  </div>
</div>
