<ng-container *ngIf="!loading(); else loadingState">
  <div *ngIf="error(); else liveMenu">
    <app-not-found></app-not-found>
  </div>

  <ng-template #liveMenu>
    <div class="animate-in fade-in duration-500">
      <router-outlet></router-outlet>
    </div>
  </ng-template>
</ng-container>

<ng-template #loadingState>
  <div
    class="flex flex-col items-center justify-center min-h-screen bg-gray-50 px-6"
  >
    <div
      class="w-16 h-16 border-4 border-orange-100 border-t-orange-600 rounded-full animate-spin mb-4"
    ></div>

    <h2 class="text-lg font-bold text-gray-900">Loading LiveMenu...</h2>

    <div
      *ngIf="showHelp()"
      class="mt-8 animate-in fade-in slide-in-from-bottom-2 duration-700"
    >
      <div
        class="bg-white p-4 rounded-2xl shadow-sm border border-gray-100 text-center max-w-xs"
      >
        <p class="text-sm text-gray-600 mb-2">Taking longer than expected?</p>
        <button
          onclick="window.location.reload()"
          class="text-xs font-black text-orange-600 uppercase tracking-wider hover:underline"
        >
          Refresh Page
        </button>
      </div>
    </div>
  </div>
</ng-template>

<div
  *ngIf="uiService.toast() as activeToast"
  class="fixed bottom-10 left-1/2 -translate-x-1/2 z-[100] animate-in fade-in slide-in-from-bottom-5 duration-300"
>
  <div
    [class]="
      activeToast.type === 'success'
        ? 'bg-gray-900/95 border-green-500/20'
        : 'bg-gray-900/95 border-red-500/20'
    "
    class="flex items-center gap-4 px-6 py-4 rounded-2xl border shadow-[0_20px_50px_rgba(0,0,0,0.3)] backdrop-blur-md"
  >
    <div class="flex items-center justify-center">
      <fa-icon
        *ngIf="activeToast.type === 'success'"
        [icon]="icons.success"
        class="text-green-400 text-lg shadow-green-500/50"
      ></fa-icon>
      <fa-icon
        *ngIf="activeToast.type === 'error'"
        [icon]="icons.error"
        class="text-red-400 text-lg shadow-red-500/50"
      ></fa-icon>
      <fa-icon
        *ngIf="activeToast.type === 'info'"
        [icon]="icons.info"
        class="text-blue-400 text-lg shadow-blue-500/50"
      ></fa-icon>
    </div>

    <span class="text-sm font-bold text-white tracking-tight whitespace-nowrap">
      {{ activeToast.message }}
    </span>
  </div>
</div>
